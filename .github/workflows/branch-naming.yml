name: Branch Naming Convention

on:
  create:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  check-branch-name:
    runs-on: ubuntu-latest
    steps:
      - name: Check branch name
        run: |
          branch_name="${GITHUB_HEAD_REF:-${GITHUB_REF#refs/heads/}}"
          
          # main ë¸Œëœì¹˜ëŠ” í†µê³¼
          if [[ "$branch_name" == "main" ]]; then
            echo "âœ… Main branch"
            exit 0
          fi
          
          # ë¸Œëœì¹˜ ëª…ëª… ê·œì¹™ ì²´í¬
          if [[ "$branch_name" =~ ^(feature|bugfix|hotfix|error-fix|refactor|docs|test|chore|release)/[a-z0-9-]+$ ]]; then
            echo "âœ… Branch name follows convention: $branch_name"
            echo "Type: $(echo $branch_name | cut -d'/' -f1)"
            echo "Description: $(echo $branch_name | cut -d'/' -f2)"
          else
            echo "âŒ Branch name doesn't follow convention: $branch_name"
            echo ""
            echo "ğŸ“ Expected format: type/description-with-hyphens"
            echo ""
            echo "âœ… Valid types:"
            echo "  â€¢ feature (ìƒˆ ê¸°ëŠ¥)"
            echo "  â€¢ bugfix (ë²„ê·¸ ìˆ˜ì •)"
            echo "  â€¢ hotfix (ê¸´ê¸‰ ìˆ˜ì •)"
            echo "  â€¢ error-fix (ì—ëŸ¬ ìˆ˜ì •)"
            echo "  â€¢ refactor (ì½”ë“œ ê°œì„ )"
            echo "  â€¢ docs (ë¬¸ì„œ ì‘ì—…)"
            echo "  â€¢ test (í…ŒìŠ¤íŠ¸ ì¶”ê°€)"
            echo "  â€¢ chore (ê¸°íƒ€ ì‘ì—…)"
            echo "  â€¢ release (ë¦´ë¦¬ì¦ˆ)"
            echo ""
            echo "âœ… Description rules:"
            echo "  â€¢ Only lowercase letters (a-z)"
            echo "  â€¢ Numbers (0-9)"
            echo "  â€¢ Hyphens (-) instead of spaces"
            echo ""
            echo "ğŸ“Œ Examples:"
            echo "  â€¢ feature/user-authentication"
            echo "  â€¢ bugfix/login-error-fix"
            echo "  â€¢ error-fix/null-pointer-exception"
            exit 1
          fi
